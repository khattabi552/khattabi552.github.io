<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mudzimu Wehope - Shona Dream Interpreter</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f1e26, #244736);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        .chat-container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.97);
            border-radius: 20px;
            box-shadow: 0 10px 35px rgba(0, 0, 0, 0.4);
            overflow: hidden;
        }
        .chat-header {
            background: linear-gradient(135deg, #244736, #4f8c61);
            color: white;
            padding: 35px;
            text-align: center;
        }
        .chat-header h1 {
            font-size: 2.4em;
            margin-bottom: 10px;
            font-weight: 300;
        }
        .chat-header .subtitle {
            font-size: 1.15em;
            opacity: 0.9;
            font-weight: 300;
        }
        .chat-messages {
            height: 450px;
            overflow-y: auto;
            padding: 25px;
            background: #f7faf8;
        }
        .message {
            margin-bottom: 22px;
            padding: 16px;
            border-radius: 15px;
            line-height: 1.55;
            max-width: 82%;
        }
        .bot-message {
            background: #e5f7ea;
            border-left: 4px solid #4f8c61;
            margin-right: auto;
        }
        .user-message {
            background: #dcefff;
            border-left: 4px solid #1d8df1;
            margin-left: auto;
        }
        .message-time {
            font-size: 0.75em;
            color: #666;
            margin-top: 5px;
        }
        .chat-input {
            padding: 20px;
            background: white;
            border-top: 1px solid #eee;
        }
        .input-group { display: flex; gap: 10px; }
        #user-input {
            flex: 1;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            resize: none;
            height: 70px;
            font-family: inherit;
        }
        #user-input:focus { outline: none; border-color: #4f8c61; }
        #send-btn {
            padding: 15px 25px;
            background: #4f8c61;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            transition: 0.3s;
        }
        #send-btn:hover { background: #356549; }
        .typing-indicator {
            display: none;
            padding: 10px;
            color: #666;
            font-style: italic;
        }
        .shona-word { color: #244736; font-weight: bold; }
        .symbol-card {
            background: #eef7f0;
            padding: 10px;
            border-radius: 10px;
            margin-top: 10px;
            font-size: 0.9em;
            border-left: 3px solid #4f8c61;
        }
        @media (max-width: 600px) {
            .chat-container { margin: 10px; }
            .message { max-width: 95%; }
            .chat-header h1 { font-size: 1.9em; }
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <h1>Mudzimu Wehope</h1>
            <div class="subtitle">Ancestral Spirit of Dreams – Enhanced Shona Dream Interpreter</div>
        </div>

        <div class="chat-messages" id="chat-messages"></div>
        <div class="typing-indicator" id="typing-indicator">Mudzimu Wehope is consulting the ancestral realm…</div>

        <div class="chat-input">
            <div class="input-group">
                <textarea id="user-input" placeholder="Describe your dream... (Enter to send, Shift+Enter for new line)"></textarea>
                <button id="send-btn">Send</button>
            </div>
        </div>
    </div>

    <script>
        const dreamSymbols = {
            'snake': {
                tags: ['danger', 'power', 'healing'],
                meanings: [
                    'Transformation and spiritual renewal.',
                    'Warning of betrayal or hidden enemies.',
                    'Communication from a powerful ancestor (Mhondoro).'
                ],
                ancestral: true
            },
            'water': {
                tags: ['emotion', 'change', 'spirits'],
                meanings: [
                    'Cleansing and spiritual healing.',
                    'Emotional turbulence or unresolved internal conflict.',
                    'Njuzu spirits may be calling you.'
                ],
                ancestral: true
            },
            'lion': {
                tags: ['strength', 'leadership'],
                meanings: [
                    'You possess strong leadership energy.',
                    'A royal ancestor is guiding you.',
                    'Prepare for challenges that need courage.'
                ],
                ancestral: true
            },
            'blood': {
                tags: ['life', 'warning'],
                meanings: [
                    'Vitality, sacrifice, and deep emotional ties.',
                    'Possible spiritual attack or emotional burden.',
                    'A call to reconnect with family roots.'
                ],
                ancestral: true
            },
            'journey': {
                tags: ['path', 'destiny'],
                meanings: [
                    'You are entering a new phase of life.',
                    'Guidance from ancestors toward your purpose.'
                ],
                ancestral: true
            }
        };

        class ShonaDreamBot {
            constructor() {
                this.chatMessages = document.getElementById('chat-messages');
                this.userInput = document.getElementById('user-input');
                this.sendBtn = document.getElementById('send-btn');
                this.typingIndicator = document.getElementById('typing-indicator');
                this.setupEventListeners();
                this.welcomeMessage();
            }

            setupEventListeners() {
                this.sendBtn.addEventListener('click', () => this.sendMessage());
                this.userInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        this.sendMessage();
                    }
                });
            }

            welcomeMessage() {
                const msg = `Mhoro! I am <span class="shona-word">Mudzimu Wehope</span>, guardian of dreams.
                Your dreams are sacred messages carried from the spirit world. Share your dream with me, and together we shall uncover its meaning.`;
                this.addMessage(msg, 'bot');
            }

            async sendMessage() {
                const msg = this.userInput.value.trim();
                if (!msg) return;
                this.addMessage(msg, 'user');
                this.userInput.value = '';
                this.showTyping();
                setTimeout(() => {
                    this.hideTyping();
                    this.addMessage(this.generateResponse(msg), 'bot');
                }, 1500);
            }

            generateResponse(text) {
                const t = text.toLowerCase();
                const found = [];

                for (const symbol in dreamSymbols) {
                    if (t.includes(symbol)) found.push(symbol);
                }

                if (found.length === 0) {
                    return `I hear your words. Your dream is personal and spiritually layered.
                    Tell me, how did you feel? Your emotions guide the interpretation.`;
                }

                let output = `<strong>I have seen important signs in your dream:</strong><br><br>`;

                found.forEach(sym => {
                    const s = dreamSymbols[sym];
                    output += `<div class="symbol-card">
                        <strong>${sym.toUpperCase()}</strong><br>
                        ${s.meanings.join('<br>• ')}
                    </div>`;
                });

                output += `<br>Your <span class="shona-word">vadzimu</span> may be guiding you. Reflect on these messages, and trust your intuition.`;

                return output;
            }

            addMessage(content, sender) {
                const div = document.createElement('div');
                div.className = `message ${sender}-message`;
                const time = new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
                div.innerHTML = `${content}<div class="message-time">${time}</div>`;
                this.chatMessages.appendChild(div);
                this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
            }

            showTyping() { this.typingIndicator.style.display = 'block'; }
            hideTyping() { this.typingIndicator.style.display = 'none'; }
        }

        document.addEventListener('DOMContentLoaded', () => new ShonaDreamBot());
    </script>
</body>
</html>
